# DE_of_LLM
## The Details of Equity-Calculation System Construction
To thoroughly simulate and analyze the dynamics of LLMs' equity in this context, we developed an equity calculation system. The design of an equity calculation system is as follows:  **Equity-Calculation**: Initially, at the 10th cycle, the system is set up with indicators such as the number of stocks held, stock value, actual position size, cash on hand, and total assets. Starting from the 11th cycle, the equity calculation system iterates through each trading cycle, adjusting the LLMs' portfolios based on the decisions made in the previous cycle to buy, sell, or keep, as well as the market conditions of the current cycle.  **Stock Ex-Dividend Adjustment**: When a stock undergoes ex-dividend adjustment, there is a significant price change between the day before and the current day, which may cause some decision-making interference for LLMs. To mitigate this interference, we implemented a stock adjustment algorithm in our code to correct the adjusted quantity of stocks held by the LLM. Position Strategy: To ensure the stability of AI decision-making systems, rule-based strategies are typically applied as an outer layer of the system. Taking this into consideration, our simplified position strategy is set as follows: for each purchase, 20% of the available cash is used to buy stocks; for each sale, 20% of the held stocks are sold. Compared to a full-position strategy, this position setting has shown overall improvement in performance.  **Trading Costs**: The trading costs for stocks are different between the A-share market in China and the US stock market. In the A-share market, buying stocks incurs a trading commission of approximately 0.025%, while selling stocks incurs a trading commission of approximately 0.025% and a 0.1% stamp duty. On the other hand, in the US stock market, buying stocks has no cost, while selling stocks incurs a trading activity fee of $0.000119 per share to FINRA, and a Securities Exchange Commission (SEC) fee of 0.00051% of the transaction value.  **Slippage**: It refers to the deviation between the actual execution price and the expected price during the execution of a trade, caused by market fluctuations or insufficient liquidity. Typically, traders aim to execute trades at a specific price, but due to changes in market conditions, the actual execution price may be higher or lower than the expected price, resulting in slippage. Slippage often leads to increased trading costs, particularly important to control for high-frequency trading or large-volume trades. Here we set slippage at 0.01 every share.  **Trading Details**: In the US stock market, there is no concept of daily price limits (up or down); however, in the A-share market, if the opening price differs from the previous day's closing price by more than 10%, trading for that stock is halted for the day, and no further buying or selling can occur. In the US stock market, the quantity of stocks purchased is unrestricted, whereas in the A-share market, only whole hundred shares can be purchased. The US stock market allows free trading, while the trading restriction in the A-share market is N+1, meaning each stock can only be traded once per day. These limitations are reflected in our code implementation.
